import { Component, EventEmitter, forwardRef, Host, Inject, Input, Optional, Output, SkipSelf, } from "@angular/core";
import { FormControl, NG_VALUE_ACCESSOR, Validators, } from "@angular/forms";
import { MatSelectCountryLangToken } from "./tokens";
import { distinctUntilChanged } from "rxjs/operators";
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
import * as i3 from "@angular/material/input";
import * as i4 from "@angular/material/form-field";
import * as i5 from "@angular/material/autocomplete";
import * as i6 from "@angular/material/core";
import * as i7 from "@angular/material/icon";
import * as i8 from "@angular/material/progress-bar";
/**
 * @author Anthony Nahas
 * @since 11.19
 * @version 2.1.0
 */
export class MatSelectCountryComponent {
    constructor(i18n, controlContainer, cdRef) {
        this.i18n = i18n;
        this.controlContainer = controlContainer;
        this.cdRef = cdRef;
        this.appearance = "outline";
        this.countries = [];
        this.placeHolder = "Select country";
        this.required = false;
        /** @deprecated Use clearable to allow user unselect country.*/
        this.nullable = true;
        this.itemsLoadSize = 20;
        this.showCallingCode = false;
        this.excludedCountries = [];
        this.name = "country";
        this.error = "";
        this.cleareable = false;
        this.extendWidth = false;
        // tslint:disable-next-line: no-output-on-prefix
        this.onCountrySelected = new EventEmitter();
        this._formControl = new FormControl({ value: "", disabled: false }, this.required ? [Validators.required] : []);
        this.debounceTime = 300;
        this.filterString = "";
        this.onChange = () => { };
        this.onTouched = () => { };
    }
    get value() {
        return this._value;
    }
    set value(val) {
        this._value = val;
        this.onChange(val);
        this.onTouched();
    }
    async ngOnInit() {
        if (this.formControlName && this.controlContainer) {
            this.control = this.controlContainer.control.get(this.formControlName);
            this._formControl = new FormControl({ value: this.control.value?.name, disabled: this.disabled }, this.control.hasValidator(Validators.required)
                ? [Validators.required]
                : []);
            this.control.valueChanges
                .pipe(distinctUntilChanged()) // Workaround for Angular Issue: https://github.com/angular/angular/issues/12540
                .subscribe((el) => {
                this._formControl.setValue(this.getValueLabel(el));
                this._applyFilters(el?.name ?? el?.alpha2Code);
                // this.inputChanged(this.getValueLabel(el));
            });
        }
        else if (this.formControlName && !this.controlContainer) {
            console.warn("Can't find parent FormGroup directive");
            this._formControl = new FormControl({ value: null, disabled: this.disabled }, this.required ? [Validators.required] : []);
        }
        else {
            this._formControl = new FormControl({ value: this.value?.name, disabled: this.disabled }, this.required ? [Validators.required] : []);
        }
        this._formControl.valueChanges.subscribe((el) => {
            this.inputChanged(el);
        });
        if (!this.countries.length) {
            this.countries = await this._loadCountriesFromDb();
        }
        this.value = this.countries.find((el) => el.alpha2Code == this.value?.alpha2Code &&
            !this.excludedCountries.find((el2) => el2.alpha2Code == el.alpha2Code));
        this._formControl.setValue(this.getValueLabel(this.value));
        this._applyFilters(this._value?.name);
    }
    ngOnChanges(changes) {
        let mustUpdateValueAndFilters = false;
        if (changes.countries !== undefined) {
            if (!changes.countries?.currentValue ||
                changes.countries?.currentValue.length === 0) {
                this._loadCountriesFromDb().then((transCountries) => {
                    this.countries = transCountries;
                    this._formControl.setValue(this.getValueLabel(this.value));
                    this._applyFilters(this._value?.name);
                });
            }
            else {
                this.countries = changes.countries?.currentValue ?? [];
                this.value = this.countries.find((el) => el.alpha2Code == this.value?.alpha2Code &&
                    !this.excludedCountries.find((el2) => el2.alpha2Code == el.alpha2Code));
                mustUpdateValueAndFilters = true;
            }
        }
        if (changes.excludedCountries?.currentValue) {
            this.value = this.countries.find((el) => el.alpha2Code == this.value?.alpha2Code &&
                !this.excludedCountries.find((el2) => el2.alpha2Code == el.alpha2Code));
            mustUpdateValueAndFilters = true;
        }
        if (this.countries &&
            this.countries.length &&
            changes._value?.currentValue) {
            this.countries = this.countries.map((country) => country.alpha2Code === changes._value?.currentValue.alpha2Code
                ? changes._value?.currentValue
                : country);
            const country = this.countries.find((country) => country.alpha2Code === changes._value?.currentValue.alpha2Code &&
                !this.excludedCountries.find((el2) => el2.alpha2Code == country.alpha2Code));
            this.value = country;
            this._formControl.setValue(this.getValueLabel(this.value));
            if (this.value?.alpha2Code !== changes._value?.previousValue?.alpha2Code) {
                this.onCountrySelected.emit(this.value);
            }
        }
        if (changes.disabled?.currentValue !== changes.disabled?.previousValue) {
            this.disabled = changes.disabled?.currentValue;
            if (this.disabled) {
                this._formControl.disable();
                if (this.control)
                    this.control.disable();
            }
            else {
                this._formControl.enable();
                if (this.control)
                    this.control.enable();
            }
        }
        if (changes.required?.currentValue !== changes.required?.previousValue) {
            this.required = changes.required?.currentValue;
            if (this.required) {
                this._formControl.setValidators([Validators.required]);
                if (this.control) {
                    this.control.addValidators([Validators.required]);
                }
            }
            else {
                this._formControl.setValidators([]);
                if (this.control) {
                    this.control.removeValidators([Validators.required]);
                }
            }
            this._formControl.updateValueAndValidity();
            if (this.control) {
                this.control.updateValueAndValidity();
            }
        }
        if (changes.appearance?.currentValue ??
            "outline" !== changes.appearance?.previousValue) {
            this.appearance = changes.appearance?.currentValue ?? "outline";
        }
        if (changes.label?.currentValue !== changes.label?.previousValue) {
            this.label = changes.label?.currentValue;
        }
        if (changes.placeHolder?.currentValue ??
            "Select country" !== changes.placeHolder?.previousValue) {
            this.placeHolder = changes.placeHolder?.currentValue ?? "Select country";
        }
        if (changes.class?.currentValue !== changes.class?.previousValue) {
            this.class = changes.class?.currentValue;
        }
        if (changes.name?.currentValue ??
            "country" !== changes.name?.previousValue) {
            this.name = changes.name?.currentValue ?? "country";
        }
        if (changes.error?.currentValue !== changes.error?.previousValue) {
            this.error = changes.error?.currentValue;
        }
        if (changes.hint?.currentValue !== changes.hint?.previousValue) {
            this.hint = changes.hint?.currentValue;
        }
        if (changes.tabIndex?.currentValue !== changes.tabIndex?.previousValue) {
            this.tabIndex = changes.tabIndex?.currentValue;
        }
        if (changes.loading?.currentValue !== changes.loading?.previousValue) {
            this.loading = changes.loading?.currentValue;
            if (this.loading || this.loadingDB || this.disabled) {
                this._formControl.disable();
            }
            else {
                this._formControl.enable();
            }
        }
        if (changes.itemsLoadSize?.currentValue !==
            changes.itemsLoadSize?.previousValue) {
            this.itemsLoadSize = changes.itemsLoadSize?.currentValue;
            mustUpdateValueAndFilters = true;
        }
        if (changes.showCallingCode?.currentValue !==
            changes.showCallingCode?.previousValue) {
            this.showCallingCode = changes.showCallingCode?.currentValue;
            this._formControl.setValue(this.getValueLabel(this.value));
        }
        if (changes.countries?.currentValue) {
            this.countries = changes.countries.currentValue;
        }
        if (changes.excludedCountries?.currentValue) {
            this.excludedCountries = changes.excludedCountries.currentValue;
        }
        if (changes.language?.currentValue &&
            changes.language.currentValue !== changes.language.previousValue) {
            this._loadCountriesFromDb().then((transCountries) => {
                this.countries = transCountries.filter((el) => this.countries.findIndex((el2) => el2.alpha2Code == el.alpha2Code) >= 0);
                this.value = this.countries.find((el) => el.alpha2Code == this.value?.alpha2Code &&
                    !this.excludedCountries.find((el2) => el2.alpha2Code == el.alpha2Code));
                this._formControl.setValue(this.getValueLabel(this.value));
                this._applyFilters(this._value?.name);
            });
        }
        if (mustUpdateValueAndFilters) {
            this._applyFilters(this._value?.name);
            this._formControl.setValue(this.getValueLabel(this.value));
        }
    }
    clear() {
        this.filterString = "";
        this._applyFilters("");
        this.value = null;
        this._formControl.reset();
        if (!this.formControlName) {
            this.onCountrySelected.emit(null);
        }
        else if (this.control) {
            this.control.reset();
        }
    }
    inputChanged(value) {
        if (value != this.value?.name) {
            if (!value) {
                this.clear();
                return;
            }
            if (this.debounceTimeout) {
                clearTimeout(this.debounceTimeout);
            }
            this.debounceTimeout = setTimeout(() => {
                this._applyFilters(value ?? "");
            }, this.debounceTime);
        }
    }
    onOptionsSelected($event) {
        const country = this.countries.find((country) => country.name === $event.option.value);
        this.filterString = country.name;
        if (this.value?.alpha2Code !== country.alpha2Code) {
            this.value = country;
            this._formControl.setValue(this.getValueLabel(this.value));
            this.onCountrySelected.emit(this.value);
        }
    }
    writeValue(value) {
        this.value = value;
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    getValueLabel(el) {
        if (!el)
            return "";
        const mainValue = el.name
            ? el.name
            : el.alpha3Code
                ? el.alpha3Code
                : el.alpha2Code ?? "";
        if (this.showCallingCode) {
            return mainValue + (el.callingCode ? " (" + el.callingCode + ")" : "");
        }
        return mainValue;
    }
    async _loadCountriesFromDb() {
        this._formControl.disable();
        this.loadingDB = true;
        let translatedCountries = [];
        try {
            translatedCountries = await this._importLang();
        }
        catch (err) {
            console.error("Error: " + err);
        }
        this.loadingDB = false;
        if (this.loading || this.loadingDB || this.disabled) {
            this._formControl.disable();
        }
        else {
            this._formControl.enable();
        }
        return translatedCountries;
    }
    _importLang() {
        const lang = ((this.language || this.i18n) ?? "").toLowerCase();
        switch (lang) {
            case "be":
                return import("./i18n/be")
                    .then((result) => result.COUNTRIES_DB_BY)
                    .then((y) => y);
            case "br":
                return import("./i18n/br")
                    .then((result) => result.COUNTRIES_DB_BR)
                    .then((y) => y);
            case "ca":
                return import("./i18n/ca")
                    .then((result) => result.COUNTRIES_DB_CA)
                    .then((y) => y);
            case "de":
                return import("./i18n/de")
                    .then((result) => result.COUNTRIES_DB_DE)
                    .then((y) => y);
            case "es":
                return import("./i18n/es")
                    .then((result) => result.COUNTRIES_DB_ES)
                    .then((y) => y);
            case "eu":
                return import("./i18n/eu")
                    .then((result) => result.COUNTRIES_DB_EU)
                    .then((y) => y);
            case "fr":
                return import("./i18n/fr")
                    .then((result) => result.COUNTRIES_DB_FR)
                    .then((y) => y);
            case "gl":
                return import("./i18n/gl")
                    .then((result) => result.COUNTRIES_DB_GL)
                    .then((y) => y);
            case "hr":
                return import("./i18n/hr")
                    .then((result) => result.COUNTRIES_DB_HR)
                    .then((y) => y);
            case "hu":
                return import("./i18n/hu")
                    .then((result) => result.COUNTRIES_DB_HU)
                    .then((y) => y);
            case "it":
                return import("./i18n/it")
                    .then((result) => result.COUNTRIES_DB_IT)
                    .then((y) => y);
            case "nl":
                return import("./i18n/nl")
                    .then((result) => result.COUNTRIES_DB_NL)
                    .then((y) => y);
            case "pt":
                return import("./i18n/pt")
                    .then((result) => result.COUNTRIES_DB_PT)
                    .then((y) => y);
            case "ru":
                return import("./i18n/ru")
                    .then((result) => result.COUNTRIES_DB_RU)
                    .then((y) => y);
            case "uk":
                return import("./i18n/uk")
                    .then((result) => result.COUNTRIES_DB_UA)
                    .then((y) => y);
            default:
                return import("./i18n/en")
                    .then((result) => result.COUNTRIES_DB)
                    .then((y) => y);
        }
    }
    _applyFilters(value) {
        const filterValue = (value ?? "").toLowerCase();
        if (!filterValue) {
            this.filteredOptions = this.countries.filter((el) => !this.excludedCountries.find((el2) => el2.alpha2Code == el.alpha2Code));
        }
        else {
            this.filteredOptions = this.countries.filter((option) => !this.excludedCountries.find((el2) => el2.alpha2Code == option.alpha2Code) &&
                (option.name?.toLowerCase().includes(filterValue) ||
                    option.alpha2Code.toLowerCase().includes(filterValue) ||
                    option.alpha3Code?.toLowerCase().includes(filterValue) ||
                    this.getValueLabel(option)
                        .toLocaleLowerCase()
                        .includes(filterValue)));
        }
        if (this.itemsLoadSize) {
            this.filteredOptions = this.filteredOptions.slice(0, this.itemsLoadSize);
        }
        // options in the UI are not updated when this component is used within a host component that uses OnPush
        this.cdRef.markForCheck();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.0.3", ngImport: i0, type: MatSelectCountryComponent, deps: [{ token: forwardRef(() => MatSelectCountryLangToken) }, { token: i1.ControlContainer, host: true, optional: true, skipSelf: true }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.0.3", type: MatSelectCountryComponent, selector: "mat-select-country", inputs: { appearance: "appearance", countries: "countries", label: "label", placeHolder: "placeHolder", required: "required", disabled: "disabled", nullable: "nullable", readonly: "readonly", tabIndex: "tabIndex", class: "class", itemsLoadSize: "itemsLoadSize", loading: "loading", showCallingCode: "showCallingCode", excludedCountries: "excludedCountries", language: "language", name: "name", error: "error", cleareable: "cleareable", formControlName: "formControlName", panelWidth: "panelWidth", _value: ["value", "_value"], extendWidth: "extendWidth", hint: "hint" }, outputs: { onCountrySelected: "onCountrySelected" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => MatSelectCountryComponent),
                multi: true,
            },
        ], usesOnChanges: true, ngImport: i0, template: "<mat-form-field [appearance]=\"appearance\" [class.d-block]=\"extendWidth\">\n  <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n  <input\n    autocomplete=\"off\"\n    [class]=\"class\"\n    [matAutocomplete]=\"this.countryAutocomplete\"\n    [placeholder]=\"this.placeHolder\"\n    [readonly]=\"this.readonly\"\n    [tabIndex]=\"tabIndex\"\n    [formControl]=\"_formControl\"\n    [name]=\"this.name\"\n    aria-label=\"country\"\n    matInput\n    type=\"text\"\n  />\n  <mat-progress-bar\n    *ngIf=\"this.loadingDB || this.loading\"\n    mode=\"buffer\"\n  ></mat-progress-bar>\n  <mat-autocomplete\n    [panelWidth]=\"panelWidth\"\n    #countryAutocomplete=\"matAutocomplete\"\n    (optionSelected)=\"onOptionsSelected($event)\"\n  >\n    <mat-option *ngFor=\"let country of filteredOptions\" [value]=\"country.name\">\n      <div class=\"d-flex\">\n        <mat-icon [svgIcon]=\"country?.alpha2Code?.toLowerCase()\"></mat-icon>\n        <small class=\"country-list-item\" [title]=\"getValueLabel(country)\">{{\n          getValueLabel(country)\n        }}</small>\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n  <div class=\"d-flex mr-1\" matSuffix>\n    <mat-icon\n      *ngIf=\"this.value\"\n      [svgIcon]=\"this.value?.alpha2Code?.toLowerCase()\"\n      class=\"ml-1 s-20 secondary-text\"\n    ></mat-icon>\n    <mat-icon\n      class=\"ml-1\"\n      class=\"ml-1 cursor-pointer pos-rel\"\n      *ngIf=\"cleareable && !!value\"\n      (click)=\"clear()\"\n      >cancel</mat-icon\n    >\n  </div>\n  <mat-error *ngIf=\"_formControl && _formControl.invalid\">{{\n    error\n  }}</mat-error>\n  <mat-hint *ngIf=\"hint\">{{ hint }}</mat-hint>\n</mat-form-field>\n", styles: [".cursor-pointer{cursor:pointer}.pos-rel{position:relative}.country-list-item{float:right;margin:auto;margin-left:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.d-flex{display:flex;width:100%}.mr-1{margin-right:1rem}.ml-1{margin-left:1rem}.d-block{display:block}\n"], dependencies: [{ kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "directive", type: i3.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "component", type: i4.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i4.MatLabel, selector: "mat-label" }, { kind: "directive", type: i4.MatHint, selector: "mat-hint", inputs: ["align", "id"] }, { kind: "directive", type: i4.MatError, selector: "mat-error, [matError]", inputs: ["id"] }, { kind: "directive", type: i4.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]", inputs: ["matTextSuffix"] }, { kind: "component", type: i5.MatAutocomplete, selector: "mat-autocomplete", inputs: ["aria-label", "aria-labelledby", "displayWith", "autoActiveFirstOption", "autoSelectActiveOption", "requireSelection", "panelWidth", "disableRipple", "class", "hideSingleSelectionIndicator"], outputs: ["optionSelected", "opened", "closed", "optionActivated"], exportAs: ["matAutocomplete"] }, { kind: "component", type: i6.MatOption, selector: "mat-option", inputs: ["value", "id", "disabled"], outputs: ["onSelectionChange"], exportAs: ["matOption"] }, { kind: "directive", type: i5.MatAutocompleteTrigger, selector: "input[matAutocomplete], textarea[matAutocomplete]", inputs: ["matAutocomplete", "matAutocompletePosition", "matAutocompleteConnectedTo", "autocomplete", "matAutocompleteDisabled"], exportAs: ["matAutocompleteTrigger"] }, { kind: "component", type: i7.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i8.MatProgressBar, selector: "mat-progress-bar", inputs: ["color", "value", "bufferValue", "mode"], outputs: ["animationEnd"], exportAs: ["matProgressBar"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.0.3", ngImport: i0, type: MatSelectCountryComponent, decorators: [{
            type: Component,
            args: [{ selector: "mat-select-country", providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => MatSelectCountryComponent),
                            multi: true,
                        },
                    ], template: "<mat-form-field [appearance]=\"appearance\" [class.d-block]=\"extendWidth\">\n  <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n  <input\n    autocomplete=\"off\"\n    [class]=\"class\"\n    [matAutocomplete]=\"this.countryAutocomplete\"\n    [placeholder]=\"this.placeHolder\"\n    [readonly]=\"this.readonly\"\n    [tabIndex]=\"tabIndex\"\n    [formControl]=\"_formControl\"\n    [name]=\"this.name\"\n    aria-label=\"country\"\n    matInput\n    type=\"text\"\n  />\n  <mat-progress-bar\n    *ngIf=\"this.loadingDB || this.loading\"\n    mode=\"buffer\"\n  ></mat-progress-bar>\n  <mat-autocomplete\n    [panelWidth]=\"panelWidth\"\n    #countryAutocomplete=\"matAutocomplete\"\n    (optionSelected)=\"onOptionsSelected($event)\"\n  >\n    <mat-option *ngFor=\"let country of filteredOptions\" [value]=\"country.name\">\n      <div class=\"d-flex\">\n        <mat-icon [svgIcon]=\"country?.alpha2Code?.toLowerCase()\"></mat-icon>\n        <small class=\"country-list-item\" [title]=\"getValueLabel(country)\">{{\n          getValueLabel(country)\n        }}</small>\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n  <div class=\"d-flex mr-1\" matSuffix>\n    <mat-icon\n      *ngIf=\"this.value\"\n      [svgIcon]=\"this.value?.alpha2Code?.toLowerCase()\"\n      class=\"ml-1 s-20 secondary-text\"\n    ></mat-icon>\n    <mat-icon\n      class=\"ml-1\"\n      class=\"ml-1 cursor-pointer pos-rel\"\n      *ngIf=\"cleareable && !!value\"\n      (click)=\"clear()\"\n      >cancel</mat-icon\n    >\n  </div>\n  <mat-error *ngIf=\"_formControl && _formControl.invalid\">{{\n    error\n  }}</mat-error>\n  <mat-hint *ngIf=\"hint\">{{ hint }}</mat-hint>\n</mat-form-field>\n", styles: [".cursor-pointer{cursor:pointer}.pos-rel{position:relative}.country-list-item{float:right;margin:auto;margin-left:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.d-flex{display:flex;width:100%}.mr-1{margin-right:1rem}.ml-1{margin-left:1rem}.d-block{display:block}\n"] }]
        }], ctorParameters: () => [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [forwardRef(() => MatSelectCountryLangToken)]
                }] }, { type: i1.ControlContainer, decorators: [{
                    type: Optional
                }, {
                    type: Host
                }, {
                    type: SkipSelf
                }] }, { type: i0.ChangeDetectorRef }], propDecorators: { appearance: [{
                type: Input
            }], countries: [{
                type: Input
            }], label: [{
                type: Input
            }], placeHolder: [{
                type: Input
            }], required: [{
                type: Input
            }], disabled: [{
                type: Input
            }], nullable: [{
                type: Input
            }], readonly: [{
                type: Input
            }], tabIndex: [{
                type: Input
            }], class: [{
                type: Input
            }], itemsLoadSize: [{
                type: Input
            }], loading: [{
                type: Input
            }], showCallingCode: [{
                type: Input
            }], excludedCountries: [{
                type: Input
            }], language: [{
                type: Input
            }], name: [{
                type: Input
            }], error: [{
                type: Input
            }], cleareable: [{
                type: Input
            }], formControlName: [{
                type: Input
            }], panelWidth: [{
                type: Input
            }], _value: [{
                type: Input,
                args: ["value"]
            }], extendWidth: [{
                type: Input
            }], hint: [{
                type: Input
            }], onCountrySelected: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0LXNlbGVjdC1jb3VudHJ5LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItbWF0ZXJpYWwtZXh0ZW5zaW9ucy9zZWxlY3QtY291bnRyeS9zcmMvbGliL21hdC1zZWxlY3QtY291bnRyeS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hbmd1bGFyLW1hdGVyaWFsLWV4dGVuc2lvbnMvc2VsZWN0LWNvdW50cnkvc3JjL2xpYi9tYXQtc2VsZWN0LWNvdW50cnkuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLElBQUksRUFDSixNQUFNLEVBQ04sS0FBSyxFQUdMLFFBQVEsRUFDUixNQUFNLEVBRU4sUUFBUSxHQUNULE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFJTCxXQUFXLEVBQ1gsaUJBQWlCLEVBQ2pCLFVBQVUsR0FDWCxNQUFNLGdCQUFnQixDQUFDO0FBRXhCLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNyRCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7OztBQW1CdEQ7Ozs7R0FJRztBQWFILE1BQU0sT0FBTyx5QkFBeUI7SUFnRHBDLFlBQzhELElBQVksRUFJaEUsZ0JBQWtDLEVBQ2xDLEtBQXdCO1FBTDRCLFNBQUksR0FBSixJQUFJLENBQVE7UUFJaEUscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxVQUFLLEdBQUwsS0FBSyxDQUFtQjtRQW5EekIsZUFBVSxHQUF1QixTQUFTLENBQUM7UUFDM0MsY0FBUyxHQUFjLEVBQUUsQ0FBQztRQUUxQixnQkFBVyxHQUFHLGdCQUFnQixDQUFDO1FBQy9CLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFFbkMsK0RBQStEO1FBQ3RE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Q0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBRUcsUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csS0FBSztzQkFBYixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csaUJBQWlCO3NCQUF6QixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csVUFBVTtzQkFBbEIsS0FBSztnQkFDVSxNQUFNO3NCQUFyQixLQUFLO3VCQUFDLE9BQU87Z0JBQ0wsV0FBVztzQkFBbkIsS0FBSztnQkFDRyxJQUFJO3NCQUFaLEtBQUs7Z0JBR0ksaUJBQWlCO3NCQUExQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRXZlbnRFbWl0dGVyLFxuICBmb3J3YXJkUmVmLFxuICBIb3N0LFxuICBJbmplY3QsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE9uSW5pdCxcbiAgT3B0aW9uYWwsXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgU2tpcFNlbGYsXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQge1xuICBBYnN0cmFjdENvbnRyb2wsXG4gIENvbnRyb2xDb250YWluZXIsXG4gIENvbnRyb2xWYWx1ZUFjY2Vzc29yLFxuICBGb3JtQ29udHJvbCxcbiAgTkdfVkFMVUVfQUNDRVNTT1IsXG4gIFZhbGlkYXRvcnMsXG59IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHsgTWF0QXV0b2NvbXBsZXRlU2VsZWN0ZWRFdmVudCB9IGZyb20gXCJAYW5ndWxhci9tYXRlcmlhbC9hdXRvY29tcGxldGVcIjtcbmltcG9ydCB7IE1hdFNlbGVjdENvdW50cnlMYW5nVG9rZW4gfSBmcm9tIFwiLi90b2tlbnNcIjtcbmltcG9ydCB7IGRpc3RpbmN0VW50aWxDaGFuZ2VkIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5cbi8qKlxuICogQ291bnRyeSBpbnRlcmZhY2UgSVNPIDMxNjZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb3VudHJ5IHtcbiAgbmFtZT86IHN0cmluZztcbiAgYWxwaGEyQ29kZTogc3RyaW5nO1xuICBhbHBoYTNDb2RlPzogc3RyaW5nO1xuICBudW1lcmljQ29kZT86IHN0cmluZztcbiAgY2FsbGluZ0NvZGU/OiBzdHJpbmc7XG59XG5cbnR5cGUgQ3VzdG9tT3B0aW9uYWw8VCwgSyBleHRlbmRzIGtleW9mIFQ+ID0gT21pdDxULCBLPiAmIFBhcnRpYWw8VD47XG50eXBlIENvdW50cnlPcHRpb25hbE1hbmRhdG9yeUFscGhhMkNvZGUgPSBDdXN0b21PcHRpb25hbDxcbiAgQ291bnRyeSxcbiAgXCJhbHBoYTNDb2RlXCIgfCBcIm5hbWVcIiB8IFwiY2FsbGluZ0NvZGVcIiB8IFwibnVtZXJpY0NvZGVcIlxuPjtcblxuLyoqXG4gKiBAYXV0aG9yIEFudGhvbnkgTmFoYXNcbiAqIEBzaW5jZSAxMS4xOVxuICogQHZlcnNpb24gMi4xLjBcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcIm1hdC1zZWxlY3QtY291bnRyeVwiLFxuICB0ZW1wbGF0ZVVybDogXCJtYXQtc2VsZWN0LWNvdW50cnkuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCJtYXQtc2VsZWN0LWNvdW50cnkuY29tcG9uZW50LnNjc3NcIl0sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTWF0U2VsZWN0Q291bnRyeUNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBNYXRTZWxlY3RDb3VudHJ5Q29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIENvbnRyb2xWYWx1ZUFjY2Vzc29yXG57XG4gIEBJbnB1dCgpIGFwcGVhcmFuY2U6IFwiZmlsbFwiIHwgXCJvdXRsaW5lXCIgPSBcIm91dGxpbmVcIjtcbiAgQElucHV0KCkgY291bnRyaWVzOiBDb3VudHJ5W10gPSBbXTtcbiAgQElucHV0KCkgbGFiZWw6IHN0cmluZztcbiAgQElucHV0KCkgcGxhY2VIb2xkZXIgPSBcIlNlbGVjdCBjb3VudHJ5XCI7XG4gIEBJbnB1dCgpIHJlcXVpcmVkOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xuICAvKiogQGRlcHJlY2F0ZWQgVXNlIGNsZWFyYWJsZSB0byBhbGxvdyB1c2VyIHVuc2VsZWN0IGNvdW50cnkuKi9cbiAgQElucHV0KCkgbnVsbGFibGU6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSByZWFkb25seTogYm9vbGVhbjtcbiAgQElucHV0KCkgdGFiSW5kZXg6IG51bWJlciB8IHN0cmluZztcbiAgQElucHV0KCkgY2xhc3M6IHN0cmluZztcbiAgQElucHV0KCkgaXRlbXNMb2FkU2l6ZTogbnVtYmVyID0gMjA7XG4gIEBJbnB1dCgpIGxvYWRpbmc6IGJvb2xlYW47XG4gIEBJbnB1dCgpIHNob3dDYWxsaW5nQ29kZSA9IGZhbHNlO1xuICBASW5wdXQoKSBleGNsdWRlZENvdW50cmllczogQ291bnRyeU9wdGlvbmFsTWFuZGF0b3J5QWxwaGEyQ29kZVtdID0gW107XG4gIEBJbnB1dCgpIGxhbmd1YWdlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG5hbWU6IHN0cmluZyA9IFwiY291bnRyeVwiO1xuICBASW5wdXQoKSBlcnJvcjogc3RyaW5nID0gXCJcIjtcbiAgQElucHV0KCkgY2xlYXJlYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBmb3JtQ29udHJvbE5hbWU/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHBhbmVsV2lkdGg/OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIEBJbnB1dChcInZhbHVlXCIpIF92YWx1ZT86IENvdW50cnkgfCB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpIGV4dGVuZFdpZHRoID0gZmFsc2U7XG4gIEBJbnB1dCgpIGhpbnQ/OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1vdXRwdXQtb24tcHJlZml4XG4gIEBPdXRwdXQoKSBvbkNvdW50cnlTZWxlY3RlZDogRXZlbnRFbWl0dGVyPENvdW50cnk+ID1cbiAgICBuZXcgRXZlbnRFbWl0dGVyPENvdW50cnk+KCk7XG5cbiAgX2Zvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKFxuICAgIHsgdmFsdWU6IFwiXCIsIGRpc2FibGVkOiBmYWxzZSB9LFxuICAgIHRoaXMucmVxdWlyZWQgPyBbVmFsaWRhdG9ycy5yZXF1aXJlZF0gOiBbXVxuICApO1xuICBmaWx0ZXJlZE9wdGlvbnM6IENvdW50cnlbXTtcbiAgZGI6IENvdW50cnlbXTtcbiAgbG9hZGluZ0RCOiBib29sZWFuO1xuICBkZWJvdW5jZVRpbWUgPSAzMDA7XG4gIGZpbHRlclN0cmluZyA9IFwiXCI7XG5cbiAgb25DaGFuZ2U6IGFueSA9ICgpID0+IHt9O1xuICBvblRvdWNoZWQ6IGFueSA9ICgpID0+IHt9O1xuICBkZWJvdW5jZVRpbWVvdXQ6IGFueTtcblxuICBwcml2YXRlIGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KGZvcndhcmRSZWYoKCkgPT4gTWF0U2VsZWN0Q291bnRyeUxhbmdUb2tlbikpIHB1YmxpYyBpMThuOiBzdHJpbmcsXG4gICAgQE9wdGlvbmFsKClcbiAgICBASG9zdCgpXG4gICAgQFNraXBTZWxmKClcbiAgICBwcml2YXRlIGNvbnRyb2xDb250YWluZXI6IENvbnRyb2xDb250YWluZXIsXG4gICAgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7fVxuXG4gIGdldCB2YWx1ZSgpOiBDb3VudHJ5IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgc2V0IHZhbHVlKHZhbDogQ291bnRyeSB8IG51bGwpIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbDtcbiAgICB0aGlzLm9uQ2hhbmdlKHZhbCk7XG4gICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgfVxuXG4gIGFzeW5jIG5nT25Jbml0KCkge1xuICAgIGlmICh0aGlzLmZvcm1Db250cm9sTmFtZSAmJiB0aGlzLmNvbnRyb2xDb250YWluZXIpIHtcbiAgICAgIHRoaXMuY29udHJvbCA9IHRoaXMuY29udHJvbENvbnRhaW5lci5jb250cm9sLmdldCh0aGlzLmZvcm1Db250cm9sTmFtZSk7XG4gICAgICB0aGlzLl9mb3JtQ29udHJvbCA9IG5ldyBGb3JtQ29udHJvbChcbiAgICAgICAgeyB2YWx1ZTogdGhpcy5jb250cm9sLnZhbHVlPy5uYW1lLCBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCB9LFxuICAgICAgICB0aGlzLmNvbnRyb2wuaGFzVmFsaWRhdG9yKFZhbGlkYXRvcnMucmVxdWlyZWQpXG4gICAgICAgICAgPyBbVmFsaWRhdG9ycy5yZXF1aXJlZF1cbiAgICAgICAgICA6IFtdXG4gICAgICApO1xuICAgICAgdGhpcy5jb250cm9sLnZhbHVlQ2hhbmdlc1xuICAgICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKSAvLyBXb3JrYXJvdW5kIGZvciBBbmd1bGFyIElzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2lzc3Vlcy8xMjU0MFxuICAgICAgICAuc3Vic2NyaWJlKChlbDogQ291bnRyeSkgPT4ge1xuICAgICAgICAgIHRoaXMuX2Zvcm1Db250cm9sLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWVMYWJlbChlbCkpO1xuICAgICAgICAgIHRoaXMuX2FwcGx5RmlsdGVycyhlbD8ubmFtZSA/PyBlbD8uYWxwaGEyQ29kZSk7XG4gICAgICAgICAgLy8gdGhpcy5pbnB1dENoYW5nZWQodGhpcy5nZXRWYWx1ZUxhYmVsKGVsKSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtQ29udHJvbE5hbWUgJiYgIXRoaXMuY29udHJvbENvbnRhaW5lcikge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgZmluZCBwYXJlbnQgRm9ybUdyb3VwIGRpcmVjdGl2ZVwiKTtcbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKFxuICAgICAgICB7IHZhbHVlOiBudWxsLCBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCB9LFxuICAgICAgICB0aGlzLnJlcXVpcmVkID8gW1ZhbGlkYXRvcnMucmVxdWlyZWRdIDogW11cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKFxuICAgICAgICB7IHZhbHVlOiB0aGlzLnZhbHVlPy5uYW1lLCBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCB9LFxuICAgICAgICB0aGlzLnJlcXVpcmVkID8gW1ZhbGlkYXRvcnMucmVxdWlyZWRdIDogW11cbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX2Zvcm1Db250cm9sLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKGVsKSA9PiB7XG4gICAgICB0aGlzLmlucHV0Q2hhbmdlZChlbCk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuY291bnRyaWVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jb3VudHJpZXMgPSBhd2FpdCB0aGlzLl9sb2FkQ291bnRyaWVzRnJvbURiKCk7XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvdW50cmllcy5maW5kKFxuICAgICAgKGVsKSA9PlxuICAgICAgICBlbC5hbHBoYTJDb2RlID09IHRoaXMudmFsdWU/LmFscGhhMkNvZGUgJiZcbiAgICAgICAgIXRoaXMuZXhjbHVkZWRDb3VudHJpZXMuZmluZCgoZWwyKSA9PiBlbDIuYWxwaGEyQ29kZSA9PSBlbC5hbHBoYTJDb2RlKVxuICAgICk7XG4gICAgdGhpcy5fZm9ybUNvbnRyb2wuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZUxhYmVsKHRoaXMudmFsdWUpKTtcbiAgICB0aGlzLl9hcHBseUZpbHRlcnModGhpcy5fdmFsdWU/Lm5hbWUpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGxldCBtdXN0VXBkYXRlVmFsdWVBbmRGaWx0ZXJzID0gZmFsc2U7XG4gICAgaWYgKGNoYW5nZXMuY291bnRyaWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWNoYW5nZXMuY291bnRyaWVzPy5jdXJyZW50VmFsdWUgfHxcbiAgICAgICAgY2hhbmdlcy5jb3VudHJpZXM/LmN1cnJlbnRWYWx1ZS5sZW5ndGggPT09IDBcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9sb2FkQ291bnRyaWVzRnJvbURiKCkudGhlbigodHJhbnNDb3VudHJpZXMpID0+IHtcbiAgICAgICAgICB0aGlzLmNvdW50cmllcyA9IHRyYW5zQ291bnRyaWVzO1xuICAgICAgICAgIHRoaXMuX2Zvcm1Db250cm9sLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWVMYWJlbCh0aGlzLnZhbHVlKSk7XG4gICAgICAgICAgdGhpcy5fYXBwbHlGaWx0ZXJzKHRoaXMuX3ZhbHVlPy5uYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvdW50cmllcyA9IGNoYW5nZXMuY291bnRyaWVzPy5jdXJyZW50VmFsdWUgPz8gW107XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvdW50cmllcy5maW5kKFxuICAgICAgICAgIChlbCkgPT5cbiAgICAgICAgICAgIGVsLmFscGhhMkNvZGUgPT0gdGhpcy52YWx1ZT8uYWxwaGEyQ29kZSAmJlxuICAgICAgICAgICAgIXRoaXMuZXhjbHVkZWRDb3VudHJpZXMuZmluZChcbiAgICAgICAgICAgICAgKGVsMikgPT4gZWwyLmFscGhhMkNvZGUgPT0gZWwuYWxwaGEyQ29kZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBtdXN0VXBkYXRlVmFsdWVBbmRGaWx0ZXJzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuZXhjbHVkZWRDb3VudHJpZXM/LmN1cnJlbnRWYWx1ZSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuY291bnRyaWVzLmZpbmQoXG4gICAgICAgIChlbCkgPT5cbiAgICAgICAgICBlbC5hbHBoYTJDb2RlID09IHRoaXMudmFsdWU/LmFscGhhMkNvZGUgJiZcbiAgICAgICAgICAhdGhpcy5leGNsdWRlZENvdW50cmllcy5maW5kKChlbDIpID0+IGVsMi5hbHBoYTJDb2RlID09IGVsLmFscGhhMkNvZGUpXG4gICAgICApO1xuICAgICAgbXVzdFVwZGF0ZVZhbHVlQW5kRmlsdGVycyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuY291bnRyaWVzICYmXG4gICAgICB0aGlzLmNvdW50cmllcy5sZW5ndGggJiZcbiAgICAgIGNoYW5nZXMuX3ZhbHVlPy5jdXJyZW50VmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuY291bnRyaWVzID0gdGhpcy5jb3VudHJpZXMubWFwKChjb3VudHJ5KSA9PlxuICAgICAgICBjb3VudHJ5LmFscGhhMkNvZGUgPT09IGNoYW5nZXMuX3ZhbHVlPy5jdXJyZW50VmFsdWUuYWxwaGEyQ29kZVxuICAgICAgICAgID8gY2hhbmdlcy5fdmFsdWU/LmN1cnJlbnRWYWx1ZVxuICAgICAgICAgIDogY291bnRyeVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvdW50cnkgPSB0aGlzLmNvdW50cmllcy5maW5kKFxuICAgICAgICAoY291bnRyeSkgPT5cbiAgICAgICAgICBjb3VudHJ5LmFscGhhMkNvZGUgPT09IGNoYW5nZXMuX3ZhbHVlPy5jdXJyZW50VmFsdWUuYWxwaGEyQ29kZSAmJlxuICAgICAgICAgICF0aGlzLmV4Y2x1ZGVkQ291bnRyaWVzLmZpbmQoXG4gICAgICAgICAgICAoZWwyKSA9PiBlbDIuYWxwaGEyQ29kZSA9PSBjb3VudHJ5LmFscGhhMkNvZGVcbiAgICAgICAgICApXG4gICAgICApO1xuICAgICAgdGhpcy52YWx1ZSA9IGNvdW50cnk7XG4gICAgICB0aGlzLl9mb3JtQ29udHJvbC5zZXRWYWx1ZSh0aGlzLmdldFZhbHVlTGFiZWwodGhpcy52YWx1ZSkpO1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnZhbHVlPy5hbHBoYTJDb2RlICE9PSBjaGFuZ2VzLl92YWx1ZT8ucHJldmlvdXNWYWx1ZT8uYWxwaGEyQ29kZVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMub25Db3VudHJ5U2VsZWN0ZWQuZW1pdCh0aGlzLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuZGlzYWJsZWQ/LmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlcy5kaXNhYmxlZD8ucHJldmlvdXNWYWx1ZSkge1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IGNoYW5nZXMuZGlzYWJsZWQ/LmN1cnJlbnRWYWx1ZTtcbiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1Db250cm9sLmRpc2FibGUoKTtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbCkgdGhpcy5jb250cm9sLmRpc2FibGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Zvcm1Db250cm9sLmVuYWJsZSgpO1xuICAgICAgICBpZiAodGhpcy5jb250cm9sKSB0aGlzLmNvbnRyb2wuZW5hYmxlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLnJlcXVpcmVkPy5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMucmVxdWlyZWQ/LnByZXZpb3VzVmFsdWUpIHtcbiAgICAgIHRoaXMucmVxdWlyZWQgPSBjaGFuZ2VzLnJlcXVpcmVkPy5jdXJyZW50VmFsdWU7XG4gICAgICBpZiAodGhpcy5yZXF1aXJlZCkge1xuICAgICAgICB0aGlzLl9mb3JtQ29udHJvbC5zZXRWYWxpZGF0b3JzKFtWYWxpZGF0b3JzLnJlcXVpcmVkXSk7XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2wpIHtcbiAgICAgICAgICB0aGlzLmNvbnRyb2wuYWRkVmFsaWRhdG9ycyhbVmFsaWRhdG9ycy5yZXF1aXJlZF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9mb3JtQ29udHJvbC5zZXRWYWxpZGF0b3JzKFtdKTtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbCkge1xuICAgICAgICAgIHRoaXMuY29udHJvbC5yZW1vdmVWYWxpZGF0b3JzKFtWYWxpZGF0b3JzLnJlcXVpcmVkXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgICAgIGlmICh0aGlzLmNvbnRyb2wpIHtcbiAgICAgICAgdGhpcy5jb250cm9sLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgY2hhbmdlcy5hcHBlYXJhbmNlPy5jdXJyZW50VmFsdWUgPz9cbiAgICAgIFwib3V0bGluZVwiICE9PSBjaGFuZ2VzLmFwcGVhcmFuY2U/LnByZXZpb3VzVmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuYXBwZWFyYW5jZSA9IGNoYW5nZXMuYXBwZWFyYW5jZT8uY3VycmVudFZhbHVlID8/IFwib3V0bGluZVwiO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy5sYWJlbD8uY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLmxhYmVsPy5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICB0aGlzLmxhYmVsID0gY2hhbmdlcy5sYWJlbD8uY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBjaGFuZ2VzLnBsYWNlSG9sZGVyPy5jdXJyZW50VmFsdWUgPz9cbiAgICAgIFwiU2VsZWN0IGNvdW50cnlcIiAhPT0gY2hhbmdlcy5wbGFjZUhvbGRlcj8ucHJldmlvdXNWYWx1ZVxuICAgICkge1xuICAgICAgdGhpcy5wbGFjZUhvbGRlciA9IGNoYW5nZXMucGxhY2VIb2xkZXI/LmN1cnJlbnRWYWx1ZSA/PyBcIlNlbGVjdCBjb3VudHJ5XCI7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmNsYXNzPy5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMuY2xhc3M/LnByZXZpb3VzVmFsdWUpIHtcbiAgICAgIHRoaXMuY2xhc3MgPSBjaGFuZ2VzLmNsYXNzPy5jdXJyZW50VmFsdWU7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoYW5nZXMubmFtZT8uY3VycmVudFZhbHVlID8/XG4gICAgICBcImNvdW50cnlcIiAhPT0gY2hhbmdlcy5uYW1lPy5wcmV2aW91c1ZhbHVlXG4gICAgKSB7XG4gICAgICB0aGlzLm5hbWUgPSBjaGFuZ2VzLm5hbWU/LmN1cnJlbnRWYWx1ZSA/PyBcImNvdW50cnlcIjtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuZXJyb3I/LmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlcy5lcnJvcj8ucHJldmlvdXNWYWx1ZSkge1xuICAgICAgdGhpcy5lcnJvciA9IGNoYW5nZXMuZXJyb3I/LmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuaGludD8uY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLmhpbnQ/LnByZXZpb3VzVmFsdWUpIHtcbiAgICAgIHRoaXMuaGludCA9IGNoYW5nZXMuaGludD8uY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy50YWJJbmRleD8uY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLnRhYkluZGV4Py5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICB0aGlzLnRhYkluZGV4ID0gY2hhbmdlcy50YWJJbmRleD8uY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy5sb2FkaW5nPy5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMubG9hZGluZz8ucHJldmlvdXNWYWx1ZSkge1xuICAgICAgdGhpcy5sb2FkaW5nID0gY2hhbmdlcy5sb2FkaW5nPy5jdXJyZW50VmFsdWU7XG4gICAgICBpZiAodGhpcy5sb2FkaW5nIHx8IHRoaXMubG9hZGluZ0RCIHx8IHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRyb2wuZGlzYWJsZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRyb2wuZW5hYmxlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoYW5nZXMuaXRlbXNMb2FkU2l6ZT8uY3VycmVudFZhbHVlICE9PVxuICAgICAgY2hhbmdlcy5pdGVtc0xvYWRTaXplPy5wcmV2aW91c1ZhbHVlXG4gICAgKSB7XG4gICAgICB0aGlzLml0ZW1zTG9hZFNpemUgPSBjaGFuZ2VzLml0ZW1zTG9hZFNpemU/LmN1cnJlbnRWYWx1ZTtcbiAgICAgIG11c3RVcGRhdGVWYWx1ZUFuZEZpbHRlcnMgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBjaGFuZ2VzLnNob3dDYWxsaW5nQ29kZT8uY3VycmVudFZhbHVlICE9PVxuICAgICAgY2hhbmdlcy5zaG93Q2FsbGluZ0NvZGU/LnByZXZpb3VzVmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuc2hvd0NhbGxpbmdDb2RlID0gY2hhbmdlcy5zaG93Q2FsbGluZ0NvZGU/LmN1cnJlbnRWYWx1ZTtcbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWVMYWJlbCh0aGlzLnZhbHVlKSk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmNvdW50cmllcz8uY3VycmVudFZhbHVlKSB7XG4gICAgICB0aGlzLmNvdW50cmllcyA9IGNoYW5nZXMuY291bnRyaWVzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuZXhjbHVkZWRDb3VudHJpZXM/LmN1cnJlbnRWYWx1ZSkge1xuICAgICAgdGhpcy5leGNsdWRlZENvdW50cmllcyA9IGNoYW5nZXMuZXhjbHVkZWRDb3VudHJpZXMuY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBjaGFuZ2VzLmxhbmd1YWdlPy5jdXJyZW50VmFsdWUgJiZcbiAgICAgIGNoYW5nZXMubGFuZ3VhZ2UuY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLmxhbmd1YWdlLnByZXZpb3VzVmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuX2xvYWRDb3VudHJpZXNGcm9tRGIoKS50aGVuKCh0cmFuc0NvdW50cmllcykgPT4ge1xuICAgICAgICB0aGlzLmNvdW50cmllcyA9IHRyYW5zQ291bnRyaWVzLmZpbHRlcihcbiAgICAgICAgICAoZWwpID0+XG4gICAgICAgICAgICB0aGlzLmNvdW50cmllcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIChlbDIpID0+IGVsMi5hbHBoYTJDb2RlID09IGVsLmFscGhhMkNvZGVcbiAgICAgICAgICAgICkgPj0gMFxuICAgICAgICApO1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5jb3VudHJpZXMuZmluZChcbiAgICAgICAgICAoZWwpID0+XG4gICAgICAgICAgICBlbC5hbHBoYTJDb2RlID09IHRoaXMudmFsdWU/LmFscGhhMkNvZGUgJiZcbiAgICAgICAgICAgICF0aGlzLmV4Y2x1ZGVkQ291bnRyaWVzLmZpbmQoXG4gICAgICAgICAgICAgIChlbDIpID0+IGVsMi5hbHBoYTJDb2RlID09IGVsLmFscGhhMkNvZGVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRyb2wuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZUxhYmVsKHRoaXMudmFsdWUpKTtcbiAgICAgICAgdGhpcy5fYXBwbHlGaWx0ZXJzKHRoaXMuX3ZhbHVlPy5uYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAobXVzdFVwZGF0ZVZhbHVlQW5kRmlsdGVycykge1xuICAgICAgdGhpcy5fYXBwbHlGaWx0ZXJzKHRoaXMuX3ZhbHVlPy5uYW1lKTtcbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWVMYWJlbCh0aGlzLnZhbHVlKSk7XG4gICAgfVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5maWx0ZXJTdHJpbmcgPSBcIlwiO1xuICAgIHRoaXMuX2FwcGx5RmlsdGVycyhcIlwiKTtcbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICB0aGlzLl9mb3JtQ29udHJvbC5yZXNldCgpO1xuICAgIGlmICghdGhpcy5mb3JtQ29udHJvbE5hbWUpIHtcbiAgICAgIHRoaXMub25Db3VudHJ5U2VsZWN0ZWQuZW1pdChudWxsKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29udHJvbCkge1xuICAgICAgdGhpcy5jb250cm9sLnJlc2V0KCk7XG4gICAgfVxuICB9XG5cbiAgaW5wdXRDaGFuZ2VkKHZhbHVlPzogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIGlmICh2YWx1ZSAhPSB0aGlzLnZhbHVlPy5uYW1lKSB7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlVGltZW91dCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlYm91bmNlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl9hcHBseUZpbHRlcnModmFsdWUgPz8gXCJcIik7XG4gICAgICB9LCB0aGlzLmRlYm91bmNlVGltZSk7XG4gICAgfVxuICB9XG5cbiAgb25PcHRpb25zU2VsZWN0ZWQoJGV2ZW50OiBNYXRBdXRvY29tcGxldGVTZWxlY3RlZEV2ZW50KSB7XG4gICAgY29uc3QgY291bnRyeSA9IHRoaXMuY291bnRyaWVzLmZpbmQoXG4gICAgICAoY291bnRyeSkgPT4gY291bnRyeS5uYW1lID09PSAkZXZlbnQub3B0aW9uLnZhbHVlXG4gICAgKTtcbiAgICB0aGlzLmZpbHRlclN0cmluZyA9IGNvdW50cnkubmFtZTtcbiAgICBpZiAodGhpcy52YWx1ZT8uYWxwaGEyQ29kZSAhPT0gY291bnRyeS5hbHBoYTJDb2RlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gY291bnRyeTtcbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWVMYWJlbCh0aGlzLnZhbHVlKSk7XG4gICAgICB0aGlzLm9uQ291bnRyeVNlbGVjdGVkLmVtaXQodGhpcy52YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBnZXRWYWx1ZUxhYmVsKGVsPzogQ291bnRyeSkge1xuICAgIGlmICghZWwpIHJldHVybiBcIlwiO1xuICAgIGNvbnN0IG1haW5WYWx1ZSA9IGVsLm5hbWVcbiAgICAgID8gZWwubmFtZVxuICAgICAgOiBlbC5hbHBoYTNDb2RlXG4gICAgICA/IGVsLmFscGhhM0NvZGVcbiAgICAgIDogZWwuYWxwaGEyQ29kZSA/PyBcIlwiO1xuICAgIGlmICh0aGlzLnNob3dDYWxsaW5nQ29kZSkge1xuICAgICAgcmV0dXJuIG1haW5WYWx1ZSArIChlbC5jYWxsaW5nQ29kZSA/IFwiIChcIiArIGVsLmNhbGxpbmdDb2RlICsgXCIpXCIgOiBcIlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG1haW5WYWx1ZTtcbiAgfVxuXG4gIGFzeW5jIF9sb2FkQ291bnRyaWVzRnJvbURiKCk6IFByb21pc2U8Q291bnRyeVtdPiB7XG4gICAgdGhpcy5fZm9ybUNvbnRyb2wuZGlzYWJsZSgpO1xuICAgIHRoaXMubG9hZGluZ0RCID0gdHJ1ZTtcbiAgICBsZXQgdHJhbnNsYXRlZENvdW50cmllcyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICB0cmFuc2xhdGVkQ291bnRyaWVzID0gYXdhaXQgdGhpcy5faW1wb3J0TGFuZygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBcIiArIGVycik7XG4gICAgfVxuICAgIHRoaXMubG9hZGluZ0RCID0gZmFsc2U7XG4gICAgaWYgKHRoaXMubG9hZGluZyB8fCB0aGlzLmxvYWRpbmdEQiB8fCB0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLl9mb3JtQ29udHJvbC5kaXNhYmxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Zvcm1Db250cm9sLmVuYWJsZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNsYXRlZENvdW50cmllcztcbiAgfVxuXG4gIHByaXZhdGUgX2ltcG9ydExhbmcoKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBsYW5nID0gKCh0aGlzLmxhbmd1YWdlIHx8IHRoaXMuaTE4bikgPz8gXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICBzd2l0Y2ggKGxhbmcpIHtcbiAgICAgIGNhc2UgXCJiZVwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2JlXCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9CWSlcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiYnJcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9iclwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfQlIpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcImNhXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vY2FcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX0NBKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJkZVwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2RlXCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9ERSlcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiZXNcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9lc1wiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfRVMpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcImV1XCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vZXVcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX0VVKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJmclwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2ZyXCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9GUilcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiZ2xcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9nbFwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfR0wpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcImhyXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vaHJcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX0hSKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJodVwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2h1XCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9IVSlcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiaXRcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9pdFwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfSVQpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcIm5sXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vbmxcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX05MKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJwdFwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL3B0XCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9QVClcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwicnVcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9ydVwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfUlUpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcInVrXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vdWtcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX1VBKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vZW5cIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hcHBseUZpbHRlcnModmFsdWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBmaWx0ZXJWYWx1ZSA9ICh2YWx1ZSA/PyBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKCFmaWx0ZXJWYWx1ZSkge1xuICAgICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSB0aGlzLmNvdW50cmllcy5maWx0ZXIoXG4gICAgICAgIChlbCkgPT5cbiAgICAgICAgICAhdGhpcy5leGNsdWRlZENvdW50cmllcy5maW5kKChlbDIpID0+IGVsMi5hbHBoYTJDb2RlID09IGVsLmFscGhhMkNvZGUpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcmVkT3B0aW9ucyA9IHRoaXMuY291bnRyaWVzLmZpbHRlcihcbiAgICAgICAgKG9wdGlvbjogQ291bnRyeSkgPT5cbiAgICAgICAgICAhdGhpcy5leGNsdWRlZENvdW50cmllcy5maW5kKFxuICAgICAgICAgICAgKGVsMikgPT4gZWwyLmFscGhhMkNvZGUgPT0gb3B0aW9uLmFscGhhMkNvZGVcbiAgICAgICAgICApICYmXG4gICAgICAgICAgKG9wdGlvbi5uYW1lPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlclZhbHVlKSB8fFxuICAgICAgICAgICAgb3B0aW9uLmFscGhhMkNvZGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJWYWx1ZSkgfHxcbiAgICAgICAgICAgIG9wdGlvbi5hbHBoYTNDb2RlPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlclZhbHVlKSB8fFxuICAgICAgICAgICAgdGhpcy5nZXRWYWx1ZUxhYmVsKG9wdGlvbilcbiAgICAgICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgLmluY2x1ZGVzKGZpbHRlclZhbHVlKSlcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZW1zTG9hZFNpemUpIHtcbiAgICAgIHRoaXMuZmlsdGVyZWRPcHRpb25zID0gdGhpcy5maWx0ZXJlZE9wdGlvbnMuc2xpY2UoMCwgdGhpcy5pdGVtc0xvYWRTaXplKTtcbiAgICB9XG5cbiAgICAvLyBvcHRpb25zIGluIHRoZSBVSSBhcmUgbm90IHVwZGF0ZWQgd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1c2VkIHdpdGhpbiBhIGhvc3QgY29tcG9uZW50IHRoYXQgdXNlcyBPblB1c2hcbiAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG59XG4iLCI8bWF0LWZvcm0tZmllbGQgW2FwcGVhcmFuY2VdPVwiYXBwZWFyYW5jZVwiIFtjbGFzcy5kLWJsb2NrXT1cImV4dGVuZFdpZHRoXCI+XG4gIDxtYXQtbGFiZWwgKm5nSWY9XCJsYWJlbFwiPnt7IGxhYmVsIH19PC9tYXQtbGFiZWw+XG4gIDxpbnB1dFxuICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgW2NsYXNzXT1cImNsYXNzXCJcbiAgICBbbWF0QXV0b2NvbXBsZXRlXT1cInRoaXMuY291bnRyeUF1dG9jb21wbGV0ZVwiXG4gICAgW3BsYWNlaG9sZGVyXT1cInRoaXMucGxhY2VIb2xkZXJcIlxuICAgIFtyZWFkb25seV09XCJ0aGlzLnJlYWRvbmx5XCJcbiAgICBbdGFiSW5kZXhdPVwidGFiSW5kZXhcIlxuICAgIFtmb3JtQ29udHJvbF09XCJfZm9ybUNvbnRyb2xcIlxuICAgIFtuYW1lXT1cInRoaXMubmFtZVwiXG4gICAgYXJpYS1sYWJlbD1cImNvdW50cnlcIlxuICAgIG1hdElucHV0XG4gICAgdHlwZT1cInRleHRcIlxuICAvPlxuICA8bWF0LXByb2dyZXNzLWJhclxuICAgICpuZ0lmPVwidGhpcy5sb2FkaW5nREIgfHwgdGhpcy5sb2FkaW5nXCJcbiAgICBtb2RlPVwiYnVmZmVyXCJcbiAgPjwvbWF0LXByb2dyZXNzLWJhcj5cbiAgPG1hdC1hdXRvY29tcGxldGVcbiAgICBbcGFuZWxXaWR0aF09XCJwYW5lbFdpZHRoXCJcbiAgICAjY291bnRyeUF1dG9jb21wbGV0ZT1cIm1hdEF1dG9jb21wbGV0ZVwiXG4gICAgKG9wdGlvblNlbGVjdGVkKT1cIm9uT3B0aW9uc1NlbGVjdGVkKCRldmVudClcIlxuICA+XG4gICAgPG1hdC1vcHRpb24gKm5nRm9yPVwibGV0IGNvdW50cnkgb2YgZmlsdGVyZWRPcHRpb25zXCIgW3ZhbHVlXT1cImNvdW50cnkubmFtZVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImQtZmxleFwiPlxuICAgICAgICA8bWF0LWljb24gW3N2Z0ljb25dPVwiY291bnRyeT8uYWxwaGEyQ29kZT8udG9Mb3dlckNhc2UoKVwiPjwvbWF0LWljb24+XG4gICAgICAgIDxzbWFsbCBjbGFzcz1cImNvdW50cnktbGlzdC1pdGVtXCIgW3RpdGxlXT1cImdldFZhbHVlTGFiZWwoY291bnRyeSlcIj57e1xuICAgICAgICAgIGdldFZhbHVlTGFiZWwoY291bnRyeSlcbiAgICAgICAgfX08L3NtYWxsPlxuICAgICAgPC9kaXY+XG4gICAgPC9tYXQtb3B0aW9uPlxuICA8L21hdC1hdXRvY29tcGxldGU+XG4gIDxkaXYgY2xhc3M9XCJkLWZsZXggbXItMVwiIG1hdFN1ZmZpeD5cbiAgICA8bWF0LWljb25cbiAgICAgICpuZ0lmPVwidGhpcy52YWx1ZVwiXG4gICAgICBbc3ZnSWNvbl09XCJ0aGlzLnZhbHVlPy5hbHBoYTJDb2RlPy50b0xvd2VyQ2FzZSgpXCJcbiAgICAgIGNsYXNzPVwibWwtMSBzLTIwIHNlY29uZGFyeS10ZXh0XCJcbiAgICA+PC9tYXQtaWNvbj5cbiAgICA8bWF0LWljb25cbiAgICAgIGNsYXNzPVwibWwtMVwiXG4gICAgICBjbGFzcz1cIm1sLTEgY3Vyc29yLXBvaW50ZXIgcG9zLXJlbFwiXG4gICAgICAqbmdJZj1cImNsZWFyZWFibGUgJiYgISF2YWx1ZVwiXG4gICAgICAoY2xpY2spPVwiY2xlYXIoKVwiXG4gICAgICA+Y2FuY2VsPC9tYXQtaWNvblxuICAgID5cbiAgPC9kaXY+XG4gIDxtYXQtZXJyb3IgKm5nSWY9XCJfZm9ybUNvbnRyb2wgJiYgX2Zvcm1Db250cm9sLmludmFsaWRcIj57e1xuICAgIGVycm9yXG4gIH19PC9tYXQtZXJyb3I+XG4gIDxtYXQtaGludCAqbmdJZj1cImhpbnRcIj57eyBoaW50IH19PC9tYXQtaGludD5cbjwvbWF0LWZvcm0tZmllbGQ+XG4iXX0=